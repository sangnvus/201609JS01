@model WingS.Models.DTOs.CreateThreadInfo
<script src="../../Content/scripts/tinymce/js/tinymce/tinymce.min.js" type="text/javascript"></script>
<script type="text/javascript">
        // Initialize your tinyMCE Editor with your preferred options
        tinyMCE.init({
            // General options
            selector: "#ThreadContent",
            height: 350,
            plugins: [
            'advlist autolink lists link image charmap print preview anchor',
             'searchreplace visualblocks code fullscreen',
             'insertdatetime media table contextmenu paste code'
            ],
            toolbar: 'undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image| sizeselect | fontselect |  fontsizeselect',
            fontsize_formats: '8pt 10pt 12pt 14pt 18pt 24pt 36pt',
            content_css: '//www.tinymce.com/css/codepen.min.css'
        });
</script>
        <div class="divPanel notop nobottom">
        </div>

        <div class="contentArea">

            <div class="divPanel notop page-content">

                <div class="breadcrumbs">
                    <a href="/#/Home">Trang chủ</a> &nbsp;/&nbsp;<a href="/#/Discussion"> Thảo Luận</a> &nbsp;/&nbsp; <span>Tạo thảo Luận</span>
                </div>

                @using (Html.BeginForm("CreateDiscussion","Thread",FormMethod.Post, new { @id = "CreateThread",@name="CreateThread", enctype = "multipart/form-data" })) {
                <div class="row-fluid">
                    <div class="span9 offset1">
                        <p>
                            Những mục có dấu <span style="color: red">*</span> không được để trống
                        </p>
                        <div class="alert alert-danger" style="background-color: rgb(240, 240, 240); color: rgb(41, 41, 41);">
                            <div class="row-fluid">
                                <div class="span4" align="center">
                                    <h3 style="margin-top: 25px;"><strong>Tiêu đề<span style="color: red"> *</span></strong>
                                    </h3>
                                </div>
                                <div class="span8">
                                    <input type="text" style="margin-top: 7px; padding: 10px; border-color: rgb(224, 95, 3); border-radius: 10px; width: 96%;" id="Title" name="Title"
                                           ng-model="Title" ng-minlength="6" ng-maxlength="100" required/>
                                    <p>
                                        <span style="color: red" ng-show="CreateThread.Title.$dirty && CreateThread.Title.$invalid">
                                            <span ng-show="CreateThread.Title.$error.required">Tiêu đề phần thảo luận không được để trống</span>
                                            <span ng-show="CreateThread.Title.$error.minlength">Tiêu đề phần thảo luận phải trên 6 kí tự</span>
                                            <span ng-show="CreateThread.Title.$error.maxlength">Tiêu đề phần thảo luận không vượt quá 100 kí tự</span>
                                        </span>
                                    </p>
                                    <p>
                                        Tiêu đề bạn nhập vào sẽ giúp mọi người tìm kiếm dễ dàng hơn.
                                    </p>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    <div class="row-fluid">
                        <div class="span9 offset1">
                            <div class="alert alert-danger" style="background-color: rgb(240, 240, 240); color: rgb(41, 41, 41);">
                                <div class="row-fluid">
                                    <div class="span4" align="center">
                                        <h3 style="margin-top: 25px;"><strong>Hình ảnh <span style="color: red"> *</span></strong>
                                        </h3>
                                    </div>
                                    <div class="span8">
                                        <p>Chọn hình ảnh bạn có</p>
                                        <input type="file" class="multiple" name="Images" multiple valid-file ng-model="Images" required accept="image/*"/>
                                        <p style="font-weight: bold;">Chọn file với định dạng JPG, JPEG, PNG, GIF, hoặc BMP. Ít nhất với 1024x768 pixels, tỉ lệ 4x3 và không vượt quá 20MB.</p>
                                        <p>
                                            <span style="color: red" ng-show="CreateThread.Images.$dirty && CreateEventForm.FileUpload.$invalid">
                                            <span ng-show="CreateThread.Images.$error.required">Bạn phải chọn ảnh để upload</span>
                                        </span>
                                        </p>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div class="row-fluid">
                         <div class="span9 offset1">
                             <div class="alert alert-danger" style="background-color: rgb(240, 240, 240); color: rgb(41, 41, 41); ">
                                 <div class="row-fluid">
                                     <div class="span4" align="center">
                                         <h3 style="margin-top:25px;"><strong>Mô tả ngắn<span style="color: red"> *</span></strong></h3>
                                     </div>
                                     <div class="span8">
                                         <p>Nhập vào mô tả ngắn </p>
                                         <textarea name="ShortDescription" style="width: 97%;"></textarea>
                                     </div>
                                 </div>
                             </div>
                         </div>
                    </div>
                <div class="row-fluid">
                    <div class="span9 offset1">
                        <div class="alert alert-danger" style="background-color: rgb(240, 240, 240); color: rgb(41, 41, 41); ">
                            <div class="row-fluid">
                                <div class="span4" align="center">
                                    <h3 style="margin-top:25px;"><strong>Câu chuyện</strong><span style="color: red"> *</span></h3>
                                </div>
                                <div class="span8">
                                    <p>Mô tả nội dung của bạn </p>
                                    <textarea id="ThreadContent" name="Content" style="height: 80%;"></textarea>
                                    <div>
                                        <p>
                                            <span id="CheckThreadContent" style="color: red" hidden>
                                                <span>Bạn phải nhập vào nội dung</span>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    </div>
                <div class="row-fluid">
                    <div class="span9 offset1" align="right">
                        <button id="CreatedThread" type="submit" onclick="return false;" ng-disabled="!CreateThread.$dirty || (CreateThread.$dirty && CreateThread.$invalid)" class=" btn btn-navbar-highlight btn-large btn-primary">
                            Tạo thảo luận
                        </button>
                    </div>
                </div>

                }

             </div>
        </div>
        <div id="footerOuterSeparator"></div>

        @Html.Partial("../Home/_Footer")


    <br /><br /><br />
    <!-- Include stylesheet -->

    <style>
        textarea{
            height:100px;
        }
    </style>
    <script>
        $("#title").focus();
        $(function () {
            $('#CreatedThread').click(function() {
                var editorContent = tinyMCE.get('ThreadContent').getContent();
                if (editorContent == '') {
                    $('#CheckThreadContent').show();
                    return false;
                }
                else {
                    $('#CreateThread').submit();
                    return true;
                }
            });
        });
    </script>
