<script>
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=167432310370225";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
<link href="~/Content/css/ThreadDetail.css" rel="stylesheet" type="text/css" />
<script src="../../Content/scripts/lightbox/dist/js/lightbox-plus-jquery.min.js" type="text/javascript"></script>
<script src="../../Content/scripts/default.js" type="text/javascript"></script>
    <div id="fb-root"></div>

    <script type="text/javascript">
        document.body.scrollTop = document.documentElement.scrollTop = 0;
    </script>

        <div class="divPanel notop nobottom">
            <div class="breadcrumbs" style="">
                <a href="/#/Home">Trang chủ</a> &nbsp;/&nbsp; <a href="/#/Discussion">Bài viết</a>&nbsp;/&nbsp; <span>Chi tiết</span>
            </div>
            <hr style="margin: 0px;"/>
        </div>
        <div class="contentArea">

            <div class="divPanel notop page-content">
                <div class="row-fluid">
                    <!--Edit Main Content Area here-->
                <div class="span12 row" id="divMain">
                    <h2 style="text-transform: uppercase; float: left;margin-bottom: 0px;">#{{Thread.ThreadID}} :&nbsp;{{Thread.ThreadName}}</h2>
                    <div class="dropdown">
                        <a href="#" class="dropdown-toggle pull-right" data-toggle="dropdown" onclick=" return false ">
                            <i class="fa fa-caret-down" style="color: gray; font-size: 21px; margin-top: 17px;"></i>
                        </a>
                        <ul class="dropdown-menu" style="margin-top: 38px;">
                            <li>
                                <a href="profile.html">
                                    <i class="fa fa-edit" style="margin-left: -6px;"></i> Sửa
                                </a>
                            </li>
                            <li>
                                <a href="profile.html">
                                    <i class="icon-flag" style="margin-left: -6px;"></i> Báo cáo bài viết
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                    <!-- Infor basic of Thread -->
                    <div class="threadInfo" style="">
                        <a href="@Url.Content("/#/Profile/{{user.UserName}}")"><span>Tạo bởi:</span> {{user.UserName}}<span class="space"></span></a>
                        <span>
                            <i class="fa fa-calendar" aria-hidden="true"></i>
                            {{Thread.CreatedDate}}<span class="space"></span>
                        </span>
                        @{if (User.Identity.IsAuthenticated)
                        {
                            <span> <a href="#" onclick=" return false " ng-click="doLike()"><i class="fa fa-thumbs-o-up" aria-hidden="true" ng-style="isLikeStyle" title="Số lượt thích"></i></a> <span ng-style="isLikeStyle"> {{Likes}}</span> <span class="space"></span></span>}
                        else
                        {
                            <span><i class="fa fa-thumbs-o-up" aria-hidden="true" ng-style="isLikeStyle" title="Số lượt thích"></i> <span ng-style="isLikeStyle"> {{Likes}}</span> <span class="space"></span></span>
                        }}
                        <span class="fb-share-button" data-href="{{CurrentPath}}" data-layout="button_count" data-size="large" data-mobile-iframe="false"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse">Chia sẻ</a></span>

                    </div>
                    <br/>
                    <br/>
                    <!-- Tab content -->
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#contentThread" onclick=" return false ">Nội dung</a></li>
                        <li><a data-toggle="tab" href="#AlbumImage" onclick=" return false ">Hình ảnh</a></li>
                    </ul>
                    <div class="tab-content">
                        <!-- Content -->
                        <div id="contentThread" class="tab-pane fade in active" style="padding: 0px 5px 5px 5px;">
                            <div class="contentThread">
                                <p ng-bind-html="Thread.Content"></p>
                            </div>
                        </div>
                        <!-- Image -->
                        <div id="AlbumImage" class="tab-pane fade">
                            <div class="row-fluid">
                                <div>
                                    <a ng-repeat="item in Thread.ImageUrl track by $index" class="example-image-link" href="{{item}}" data-lightbox="example-set" data-title="Click chuột vào mũi tên để xem tiếp album.">
                                        <img style="width: 220px;height: 175px;" class="example-image" src="{{item}}" alt="" />
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                        @*<div class="row-fluid">
                            <!--Infor of User-->
                            <div class="span3">
                                <h2>Thông tin</h2>
                                <hr>
                                <p><span style="font-weight: bold">Tạo bởi:</span>   <strong>{{user.UserName}}</strong> </p>
                                <p><span style="font-weight: bold">Điểm tích lũy:</span> <span>600</span></p>
                                <p><span style="font-weight: bold">Ảnh đại diện</span><p>
                                <p><img src="{{user.ProfileImage}}" class="img-polaroid" alt=""></p>

                                <a href="#" style="color: #333"><i class="icon-envelope-alt"></i> Nhắn tin</a>
                                &nbsp; &nbsp;<a href="#" style="color: #333"><i class="icon-ban-circle"></i> Báo cáo người dùng</a>
                            </div>
                            <!--/End Infor of User  -->
                            <!--Edit Main Content Area here-->
                            <div class="span9" id="divMain">
                                <div class="row-fluid">
                                    <div class="span3 ">
                                        @if (User.Identity.Name == null || User.Identity.Name == "")
                                        {
                                            <i class="fa fa-thumbs-up" style="color:black;" aria-hidden="true" title="Số lượt thích"></i><span><strong> &nbsp; &nbsp;&nbsp;{{Likes}}</strong></span>
                                        }
                                        else
                                        {
                                            <a href="#" onclick="return false;" ng-click="doLike()"><i class="fa fa-thumbs-up" aria-hidden="true" ng-style="isLikeStyle" title="Số lượt thích"></i></a><span><strong> &nbsp; &nbsp;&nbsp;{{Likes}}</strong></span>
                                        }
                                    </div>
                                    <div class="span3"><i class="icon-flag"></i> <strong>Báo cáo bài viết</strong></div>
                                    @*<div class="icon-share-alt span3 " data-href="{{CurrentPath}}" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse">Share</a></div>*@
                                    @*<div class="icon-share-alt span3 " data-href="http://localhost:2710/#/ThreadDetail/9" data-layout="button_count" data-size="small" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A2710%2F%23%2FThreadDetail%2F9&amp;src=sdkpreparse"> Chia sẻ</a></div>
                                </div>
                                <hr />
                                <div class="row-fluid" id="isComment">
                                    <br />
                                    <div class="span6 offset1">
                                        <div class="alert alert-danger" style="background-color: rgb(240, 240, 240); color: rgb(41, 41, 41);">
                                            <div class="row-fluid">
                                                <h3 style="margin-top:15px;"><strong>Hiện tại chưa có bình luận nào </strong></h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="media" ng-repeat="item in CommentThread| limitTo: paginationLimit()">
                                    <a class="pull-left" href="#">
                                        <img src="{{item.UserImageProfile}}" style="width:64px; height:64px;" class="img-circle" alt="" />
                                    </a>
                                    <div class="media-body">
                                        <h4 class="media-heading">{{item.UserCommentedName}} <span><small>{{item.CommentedTime}}</small></span></h4>
                                        {{item.Content}}
                                    </div>
                                    <br>
                                    <div class="media-footer">
                                        <a href="#" class="voteButton" onclick="return false;">Vote | 50 </a> <a href="#" style="color: #999; font-size: 13px;"> DownVote </a> | <a href="#" onclick="return false" style="color: #999; font-size: 13px;" ng-click="showReply[$index]=true;getSubcomment(item.CommentId, $index)"> Trả lời ({{item.NumberSubComment}}) </a>
                                    </div>
                                    <hr>
                                    <div ng-show="showReply[$index]">
                                        <div class="media" style="margin-left: 67px;" ng-repeat="subcomment in SubCommentThread[$index]">
                                            <a class="pull-left" href="#">
                                                <img src="{{subcomment.UserImageProfile}}" style="width:45px; height:45px;" class="img-circle" alt="" />
                                            </a>
                                            <div class="media-body">
                                                <h4 class="media-heading">{{subcomment.UserCommentedName}} <span><small>{{subcomment.CommentedTime}}</small></span></h4>
                                                {{subcomment.Content}}
                                            </div>
                                            <hr />
                                        </div>

                                        <div ng-if="User_Information.IsAuthen" style="margin-left:67px;">
                                            <br />
                                            <a class="pull-left" href="#">
                                                <img src="{{User_Information.ProfileImage}}" style="width:40px; height:40px;" class="img-circle" alt="" />
                                            </a>&nbsp;&nbsp;&nbsp;<input class="subContent" type="text" placeholder="Nhập bình luận" style="width:50%; height:40px; " ng-model="$parent.Subcontent" my-enter="addSubComment(Subcontent,{{item.CommentId}},$index)" />
                                            <hr />
                                        </div>
                                    </div>
                                </div>
                                <span style="margin-left:64px;"></span><a href="#" onclick="return false;" ng-show="hasMoreItemsToShow()" ng-click="showMoreItems()">Xem thêm bình luận</a>
                                <br />
                                <div ng-if="User_Information.IsAuthen">
                                    <a class="pull-left" href="#">
                                        <img src="{{User_Information.ProfileImage}}" style="width:40px; height:40px; margin-left:25px; " class="img-rounded" alt="" />
                                    </a>&nbsp;&nbsp;&nbsp;<textarea placeholder="Nhập bình luận" style="width:75%; height:50px; " ng-model="$parent.content" my-enter="addContent(content)"></textarea>
                                </div>
                                <br />
                                <div align="center" style="margin-right:15px;">
                                    <a class="btn btn-primary" href="#" ng-click="reloadComment()" onclick="return false;"><i class="icon-refresh icon-spin"></i> Tải lại bình luận</a>
                                </div>
                            </div>
                        </div>*@
                    <hr style="margin-top: 10px; margin-bottom: -26px;" />
                    <br />
                    <h2>{{NumberOfComment}} Bình luận <a style="font-size: 17px; color: #333;margin-left: 5px;" href="#" ng-click="reloadComment()" onclick="return false;"><i class="fa fa-refresh" title="Tải lại bình luận" aria-hidden="true"></i></a></h2>
                    <div class="row-fluid">
                        <!--Edit Main Content Area here-->
                        <div class="span10 " id="divMain" style="margin-top: -15px;">
                            <div ng-if="User_Information.IsAuthen" style="margin-top: 20px;">
                                <a class="pull-left" href="/#/Profile/{{item.UserCommentedName}}">
                                    <img src="{{User_Information.ProfileImage}}" style="width:55px; height:55px; margin-left:85px; " class="img-rounded" alt="" />
                                </a>&nbsp;&nbsp;&nbsp;<textarea placeholder="Viết bình luận" style="width:81%; height:35px;padding-top: 15px; " ng-model="$parent.content" my-enter="addContent(content)"></textarea>
                            </div>
                            <div class="media" ng-repeat="item in CommentThread| limitTo: paginationLimit()">
                                <a class="pull-left" href="/#/Profile/{{item.UserCommentedName}}">
                                    <img src="{{item.UserImageProfile}}" style="width: 55px; height: 55px; margin-left: 85px;" class="img-rounded" alt="" />
                                </a>
                                <div class="media-body">
                                    <h4 style="" class="media-heading">
                                        {{item.UserCommentedName}}
                                        <span><small>&nbsp;{{item.CommentedTime}}</small></span>
                                    </h4>
                                    <span style="margin-top: -5px; height: 18px;" class="pull-right" ng-if="item.isDeleted" href="#" title="Xóa bình luận" ng-click="dialog(item.CommentId)" onclick="return false">
                                        <i id="btnDelete" class="fa fa-remove" style="font-size: 20px; color: white;"></i>
                                    </span>
                                    <p style="margin-top: -6px;"
                                       onmousemove="document.all.btnDelete.style.color = '#999' "
                                       onmouseout="document.all.btnDelete.style.color = 'white' ">
                                        {{item.Content}}
                                    </p>
                                </div>
                                <div class="media-footer">
                                    @{if (User.Identity.IsAuthenticated)
                                    {

                                        <a ng-if="!item.isLiked" href="#" onclick="return false; " ng-click="likeComment(item.CommentId,$index); item.isLiked=!item.isLiked"> Thích </a>
                                        <a ng-if="item.isLiked" href="#" onclick="return false;" ng-click="likeComment(item.CommentId,$index);item.isLiked=!item.isLiked"> Bỏ thích </a>
                                        <span style="color: #2865a1;"> - </span>
                                        <a href="#" onclick="return false " ng-click="showReply[$index]=!showReply[$index];getSubcomment(item.CommentId, $index)"> Trả lời ({{item.NumberSubComment}}) </a> <span style="color: #2865a1;"> - </span>
                                        <span style="color: #999;"><i class="fa fa-thumbs-o-up" aria-hidden="true" title="Số lượt thích"></i> {{item.NumberOfLikes}}</span>
                                    }
                                    else
                                    {
                                        <a href="#" onclick="return false;"> Thích </a>
                                        <span style="color: #2865a1;"> - </span>
                                        <a href="#" onclick="return false " ng-click="showReply[$index]=!showReply[$index];getSubcomment(item.CommentId, $index)"> Trả lời ({{item.NumberSubComment}}) </a> <span style="color: #2865a1;"> - </span>
                                        <span style="color: #999;"><i class="fa fa-thumbs-o-up" aria-hidden="true" title="Số lượt thích"></i> {{item.NumberOfLikes}}</span>
                                    }
                                    }
                                </div>
                                <div ng-show="showReply[$index]" style="margin-top: 15px;">
                                    <div class="media" style="margin-left: 67px;" ng-repeat="subcomment in SubCommentThread[$index]">
                                        <a class="pull-left" href="/#/Profile/{{item.UserCommentedName}}">
                                            <img src="{{subcomment.UserImageProfile}}" style="width: 45px; height: 45px; margin-left: 80px;" class="img-rounded" alt="" />
                                        </a>
                                        <div class="media-body">
                                            <h4 class="media-heading">
                                                {{subcomment.UserCommentedName}}
                                                <span><small>&nbsp;{{subcomment.CommentedTime}}</small></span>
                                            </h4>
                                            <span style="margin-top: -5px; height: 18px;" class="pull-right" ng-if="subcomment.isDeleted" href="#" title="Xóa bình luận" ng-click="deleteSubComment(subcomment.CommentId, item.CommentId, $index)" onclick="return false">
                                                <i id="btnSubDelete" class="fa fa-remove" style="font-size: 20px; color: white;"></i>
                                            </span>
                                            <p style="margin-top: -6px;"
                                               onmousemove=" document.all.btnSubDelete.style.color = '#999' "
                                               onmouseout=" document.all.btnSubDelete.style.color = 'white' ">
                                                {{subcomment.Content}}
                                            </p>
                                        </div>
                                    </div>

                                    <div ng-if="User_Information.IsAuthen" style="margin-left: 134px; margin-top: 15px;">
                                        <a class="pull-left" href="/#/Profile/{{item.UserCommentedName}}">
                                            <img src="{{User_Information.ProfileImage}}" style="width: 45px; height: 45px; margin-left: 12px;" class="img-rounded" alt="" />
                                        </a>
                                        <input class="subContent" type="text" placeholder="Viết bình luận" style="width: 89%; height: 37px;" ng-model="$parent.Subcontent" my-enter="addSubComment(Subcontent,{{item.CommentId}},$index)" />
                                    </div>
                                </div>
                            </div>
                            <br />
                            <span style="margin-left:87px;"></span><a href="#" onclick="return false;" ng-show="hasMoreItemsToShow()" ng-click="showMoreItems()">Xem thêm bình luận</a>
                        </div>
                    </div>


                
                </div>

                <!--End Main Content-->
            </div>
            <div id="footerInnerSeparator"></div>
        </div>
        <div id="footerOuterSeparator"></div>
    @Html.Partial("../Home/_Footer")
    <br /><br /><br />

  <style>
      #creatorThread{
        padding-left:18px;
        padding-top: 10px;
        height:600px;
        background: #ECF0F1;

      }
  </style>

