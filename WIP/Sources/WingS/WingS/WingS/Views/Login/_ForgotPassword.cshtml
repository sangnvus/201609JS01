

<div id="forgotPassDialog" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-container" style="width:520px">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <div class="modal-header">
                <div class="row form-group">
                    <div class="col-sm-12">
                        <h3 class="modal-title" style="text-align:center">QUÊN MẬT KHẨU</h3>
                    </div>
                    <div class="col-sm-12" align="center">
                        <p>Bạn vui lòng nhập tên tài khoản và Email của mình để lấy lại mật khẩu.</p>
                    </div>
                </div>
            </div>
@using (Html.BeginForm("ForgotPassword", "ForgotPassword", FormMethod.Post, new { @class = "login-content", @id = "ForgotPassForm", @name = "ForgotPassForm", role = "form" }))
{
    <h4 id="ErrorMessage" style="color:red; margin-left:30px;"> </h4>
    <div class="modal-body">
        <div class="row form-group">
            <div class="col-sm-12">
                <label for="UserNameInput">
                    Tên đăng nhập
                    <!-- <span class="pull-right"></span> -->
                </label>
            </div>

            <div class="col-sm-12">
                <input type="text" name="UserNameInput" id="UserNameInput" placeholder="tên đăng nhập" required>
            </div>

        </div>

        <div class="row form-group">
            <div class="col-sm-12">
                <label for="EmailInput">
                    Địa chỉ email
                    <!-- <span class="pull-right"></span> -->
                </label>
            </div>

            <div class="col-sm-12">
                <input type="text" name="EmailInput" id="EmailInput" placeholder="email@domain.com" required>
            </div>
        </div>
    </div>
}
            <div class="modal-footer">
                <div class="row form-group">
                    <div class="col-sm-12">
                        <input type="submit" name="submitForgotPass" id="submitForgotPass" value="Lấy lại mật khẩu!">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('#submitForgotPass').click(function () {

            $('#ErrorMessage').html("");
            $.getJSON("/ForgotPasswordController/ValidateUser", { UserName: $("#UserNameInput").val(), emailAdress: $("#EmailInput").val() }, function (data) {
                if (data == "Tài khoản hoặc email không tồn tại!") {
                    $('#ErrorMessage').html("Tài khoản hoặc email không tồn tại!");
                    return False;

                } else if (data == "Tài khoản bị khóa hoặc chưa xác nhận Email!") {
                    $('#ErrorMessage').html("Tài khoản bị khóa hoặc chưa xác nhận Email!");
                    return False;
                }
                else {
                    $('#ForgotPassForm').submit();
                }
            });
        })



    });
</script>
